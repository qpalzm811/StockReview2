# AlphaRadar 垃圾股筛选标准 (Smart Mode)

## 1. 核心原则
在数据获取源头 (Layer 1) 进行清洗，确保入库的每一只股票都是具备交易价值的标的。采用 **“智能时间感知”** 策略，解决早盘成交量不足导致的误杀问题。

## 2. A 股筛选逻辑 (Logic for CN)

### 2.1 基础硬性过滤 (Fundamental Filter)
无论何时运行，必须满足：
*   **名称过滤**: 剔除名称中包含 `ST`, `*ST`, `退` 的股票。
*   **价格过滤**: 剔除收盘价 `Close < 2.0` 元的仙股。
*   **板块过滤**:
    *   保留: 主板 (`00`, `60`), 创业板 (`30`), 科创板 (`68`)。
    *   剔除: 北交所 (`8`, `4`), B股 (`9`)。

### 2.2 智能流动性过滤 (Smart Liquidity Filter)
根据系统运行时间自动切换模式：

#### A. 盘中模式 (Intraday Mode)
*   **触发时间**: 交易日 `9:25 - 15:00`
*   **逻辑**: 放宽成交额限制，引入市值作为代理指标。
    1.  **成交额**: `Amount >= 20,000,000` (2000万)。
        *   *目的*: 剔除绝对的死股，防止早盘误杀。
    2.  **总市值**: `Total Market Cap >= 2,000,000,000` (20亿)。
        *   *目的*: 使用市值作为“昨日活跃度”的代理，剔除微盘垃圾股。

#### B. 盘后模式 (Post-Market Mode)
*   **触发时间**: 15:00 之后 或 9:00 之前
*   **逻辑**: 严格依据当日最终成交情况。
    1.  **成交额**: `Amount >= 100,000,000` (1亿)。
        *   *目的*: 确保只有流动性充沛的股票进入历史数据库。

## 3. 美股筛选逻辑 (Logic for US)
*(暂未启用智能模式，维持静态标准)*
*   **交易所**: 仅限 `NYSE` 或 `NASDAQ`。
*   **价格**: `Close >= 1.0` 美元。
*   **成交量**: `Volume >= 100,000`。
*   **市值**: `Market Cap >= 100,000,000` (1亿美金)。

## 4. 技术实现要点
*   **API 选择**: 使用 `ak.stock_zh_a_spot_em()` 获取包含 `成交额` 和 `总市值` 的实时快照。
*   **容错机制 (Fallback)**: 若实时行情接口 (Spot) 连续 3 次超时，自动降级为“轻量级接口” (仅获取代码/名称)，此时仅执行基础硬性过滤 (名称/板块)，跳过流动性/价格过滤，确保软件可运行。